document.addEventListener("DOMContentLoaded",()=>{carregarGastos();atualizarSaldos()});let ticket=parseFloat(localStorage.getItem("ticket"))||0;let extra=parseFloat(localStorage.getItem("extra"))||0;let dataInicio=localStorage.getItem("dataInicio");let mes=parseInt(localStorage.getItem("mes"))||1;let gastos=JSON.parse(localStorage.getItem("gastos"))||[];let metaSemanal=ticket/4;let saldoTicket=ticket;let saldoExtra=extra;function adicionarGasto(){const data=document.getElementById("data").value;const valor=parseFloat(document.getElementById("valor").value);const local=document.getElementById("local").value;if(!data||isNaN(valor)||!local){alert("Por favor, preencha todos os campos corretamente.");return}const dataGasto=new Date(data);if(dataGasto.getMonth()+1!==mes){alert("Este gasto não pertence ao mês selecionado!");return}if(saldoTicket>=valor){saldoTicket-=valor}else{const resto=valor-saldoTicket;saldoTicket=0;saldoExtra-=resto}const gasto={data,valor,local};gastos.push(gasto);localStorage.setItem("gastos",JSON.stringify(gastos));carregarGastos();atualizarSaldos()}function carregarGastos(){const corpoTabela=document.getElementById("corpoTabela");corpoTabela.innerHTML="";gastos.filter(gasto=>{const data=new Date(gasto.data);return data.getMonth()+1===mes}).forEach(gasto=>{const linha=document.createElement("tr");linha.innerHTML=`<td>${gasto.data}</td><td>${gasto.valor.toFixed(2)}</td><td>${gasto.local}</td>`;corpoTabela.appendChild(linha)})}function atualizarSaldos(){const saldoMensal=saldoTicket+saldoExtra;document.getElementById("metaSemanal").textContent=metaSemanal.toFixed(2);document.getElementById("saldoTicket").textContent=saldoTicket.toFixed(2);document.getElementById("saldoExtra").textContent=saldoExtra.toFixed(2);document.getElementById("saldoMensal").textContent=saldoMensal.toFixed(2)}function toggleDarkMode(){const body=document.body;const toggle=document.getElementById("darkModeToggle");body.classList.toggle("dark-mode");const isDarkMode=body.classList.contains("dark-mode");localStorage.setItem("darkMode",isDarkMode)}function carregarModoEscuro(){const isDarkMode=localStorage.getItem("darkMode")==="true";const body=document.body;const toggle=document.getElementById("darkModeToggle");if(isDarkMode){body.classList.add("dark-mode");toggle.checked=true}}document.addEventListener("DOMContentLoaded",carregarModoEscuro);
